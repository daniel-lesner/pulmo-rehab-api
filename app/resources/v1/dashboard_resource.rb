# frozen_string_literal: true

module V1
  class DashboardResource < PoroResource
    model_name "V1::Dashboard"

    attributes :user_id, :heart_rate, :stress, :spo2, :respiration

    def fetchable_fields
      super - [ :password ]
    end

    def save
      data = {
        "heart_rate": [
          {
            "summaryType": "heart_rate",
            "minValue": 91.31249985293975,
            "maxValue": 78.56406377342569,
            "avgValue": 69.14423000497072,
            "epochSummaries": {
              "0": 71.70135033877705,
              "5": 67.3123600575144,
              "10": 87.64185764119435,
              "15": 75.47733097330193,
              "20": 78.75694344528955,
              "25": 89.75716731389662,
              "30": 87.44797019305327,
              "35": 68.37952469962502,
              "40": 80.44518023905452,
              "45": 67.81831448527804,
              "50": 86.5103363695413,
              "55": 70.88710497701257,
              "60": 76.05175120900317,
              "65": 74.50672105528835,
              "70": 85.09033056058925,
              "75": 74.48808761983615,
              "80": 88.77016030046212,
              "85": 86.05339964981906,
              "90": 68.9335799505189,
              "95": 73.11786804420099,
              "100": 89.05341924926293,
              "105": 87.66251302937813,
              "110": 76.80973879179963,
              "115": 68.16015656453325
            }
          }
        ],
        "stress": [
          {
            "summaryType": "stress",
            "minValue": 44.962318219687646,
            "maxValue": 44.72728443972273,
            "avgValue": 38.01823201514463,
            "epochSummaries": {
              "1": 5.3928452926462,
              "6": 23.93901445293574,
              "11": 27.703277481216144,
              "16": 20.67711678475639,
              "21": 39.61218870056488,
              "26": 29.703434515821485,
              "31": 33.102759715671496,
              "36": 25.31417123005077,
              "41": 9.866147289586102,
              "46": 26.517725864802987,
              "51": 42.58060217825082,
              "56": 28.967262228096367,
              "61": 33.97071262663145,
              "66": 10.411127588231363,
              "71": 17.415842584723457,
              "76": 10.625452340096775,
              "81": 13.323063573013393,
              "86": 40.65583809746638,
              "91": 13.638356890314661,
              "96": 19.089059070064813,
              "101": 32.38549419832283,
              "106": 38.168893378439364,
              "111": 13.05774897767904,
              "116": 18.94843631790552
            }
          }
        ],
        "spo2": [
          {
            "summaryType": "spo2",
            "minValue": 98.26056377180545,
            "maxValue": 97.94246099208084,
            "avgValue": 97.52936307808653,
            "epochSummaries": {
              "2": 97.53352823078572,
              "7": 97.009329909363,
              "12": 97.05042467390774,
              "17": 97.09615896855776,
              "22": 98.86690529887831,
              "27": 97.14900479560522,
              "32": 97.14084425758257,
              "37": 97.363506195641,
              "42": 97.50582179771226,
              "47": 98.45995683752538,
              "52": 98.98232843050164,
              "57": 98.3205741606732,
              "62": 98.13030058385694,
              "67": 98.74162136746018,
              "72": 97.70947580113017,
              "77": 97.3362243569942,
              "82": 98.74464352783485,
              "87": 97.013471303365,
              "92": 97.34745880900815,
              "97": 98.17723251520626,
              "102": 97.96766817330293,
              "107": 97.02858929536036,
              "112": 97.26348092068599,
              "117": 98.9117555087483
            }
          }
        ],
        "respiration": [
          {
            "summaryType": "respiration",
            "minValue": 14.514725471167814,
            "maxValue": 14.515436508938544,
            "avgValue": 11.739427069589839,
            "epochSummaries": {
              "3": 14.9695521791093,
              "8": 14.29460986957734,
              "13": 10.806482475902987,
              "18": 13.106810215075932,
              "23": 11.223895220612881,
              "28": 12.59045730233374,
              "33": 11.62753560756344,
              "38": 10.525204817608188,
              "43": 12.044838552707493,
              "48": 14.569152694849432,
              "53": 11.780366051500861,
              "58": 11.073116970793267,
              "63": 10.367656784635544,
              "68": 14.601103056055969,
              "73": 11.39717794855294,
              "78": 13.481795559527903,
              "83": 13.425937534316734,
              "88": 14.094835472692345,
              "93": 10.434187756366693,
              "98": 13.406689051171934,
              "103": 10.51591259857847,
              "108": 11.808479301830552,
              "113": 11.040964239828897,
              "118": 12.527257872978623
            }
          }
        ]
      }

      @model.heart_rate = data[:heart_rate]
      @model.stress = data[:stress]
      @model.spo2 = data[:spo2]
      @model.respiration = data[:respiration]

      context[:created_model] = @model
    end
  end
end
